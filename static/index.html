<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>DVD Pila!</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/jquery.fancybox.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="css/style.css">

  <link rel="apple-touch-icon" sizes="57x57" href="css/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="css/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="css/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="css/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="css/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="css/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="css/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="css/images/favicons/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="css/images/favicons/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="css/images/favicons/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="css/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="css/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="css/images/favicons/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="css/images/favicons/mstile-144x144.png">
</head>
<body>
  <script type="text/x-handlebars">
    <header class="navigation">
    <div class="menu-wrapper">
      <p class="navigation-menu-button" id="js-mobile-menu">
          {{#link-to 'index' }}<span {{action "pageOne"}}>
            <img src="css/images/dvd_pila_logo_white.svg" alt="DVD Pila!">
          </span>{{/link-to}}</li>
      </p>
      <div class="nav">
        <ul id="navigation-menu">
          <li class="nav-link">
          {{#link-to 'index' class="hero-logo no-bottom"}}<span {{action "pageOne"}}>
            <img src="css/images/dvd_pila_logo_white.svg" alt="DVD Pila!">
          </span>{{/link-to}}</li>
        </ul>
      </div>
      <div class="navigation-tools">
        <div class="search-bar">
          <div class="search-and-submit">
            {{view App.SearchBox placeholder="Search" class="search" type="search"}}
          </div>
          </div>
          </div>
    </header>
    <div class="container">
      {{#view App.FlashView id="flash-view"}}
        <div id="message">
          {{view.content.message}}
        </div>
      {{/view}}

      {{outlet}}
    </div>
  </script>

  <script type="text/x-handlebars" id="index">
      {{#if App.searchResultsController.searchResults}}
        <div class="dvd-list">
          {{#each App.searchResultsController}}
            {{partial "dvds_list"}}
          {{/each}}
        </div>
      {{else}}
        {{#if model.isAdding}}
          <div class="col-four dvd-form">
            {{partial "dvd_fields"}}
            <button class="success" {{action 'createDvd'}}>Add DVD</button> &nbsp;
            <button class="default" {{action 'cancelAdding'}}>Cancel</button>
          </div>
        {{else}}
          <br/>
          <button id="add-new-dvd" class="success" {{action 'add'}}>Add New DVD</button>
          <br/>
          <br/>
        {{/if}}

        <ul>
        <div class="dvd-list">
          {{#each paginatedContent}}
            {{partial "dvds_list"}}
          {{/each}}
        </div>
      </ul>

        {{#if hasPages}}
          <div class="pagination">
            <ul>
              {{#if prevPage}}
              <li class="page-prev"><a href="#" {{action "selectPage" prevPage}}>Prev</a></li>
              {{else}}
              <li class="disabled"><a>Prev</a></li>
              {{/if}}

              {{#each pages itemController="dvd"}}
              <li {{bind-attr class="activePage disabled"}}><a href="#" {{action "selectPage" number}}>{{number}}</a></li>
              {{/each}}

              {{#if nextPage}}
              <li class="page-next"><a href="#" {{action "selectPage" nextPage}}>Next</a></li>
              {{else}}
              <li class="disabled"><a>Next</a></li>
              {{/if}}
            </ul>
          </div>
        {{/if}}
      {{/if}}
  </script>

   <script type="text/x-handlebars" id="dvd">
    <br/><br/>

    <div class="col-four">
      <div class="dvd-image">
        <a {{bind-attr href="image_url"}} class="fancybox" rel="">
          <img {{bind-attr src="image_url"}}/>
        </a>
      </div>
      <ul class="dvd-attr">
        <li><strong>Title:</strong> {{title}}</li>
        <li><strong>Created:</strong> {{format-date created_at}}</li>
        <li><strong>Created By:</strong> {{created_by}}</li>
        <li><strong>Rating:</strong> {{rating}}</li>
        <li>
          <div>
            <strong>Info:</strong> 
            <br/>
            <span class="dvd-info">
              {{abstract_txt}}

              <br/>
              <div class="ddg-div">
                <a {{bind-attr href="abstract_url"}} target="_blank">{{abstract_source}}</a>
                &nbsp;&nbsp;
                <a {{bind-attr href="ddg_url"}} target="_blank" class="ddg">
                  <img src="images/ddg_logo.svg" width="80" height="80"/>
                </a>
              </div>

            </span>
          </div>
        </li>
      </ul>
    </div>

    {{#if isEditing}}
      <div class="col-four dvd-form">
        {{partial 'dvd/edit'}}
        <button class="success" {{action 'saveDvd'}}>Update DVD</button>
        <button class="default" {{action 'cancelEditing'}}>Cancel</button>

        <br/><br/><br/>

        <button class="danger" {{action 'delete'}}>Delete</button>
      </div>
    {{else}}
      <br/>
      <button class="success edit" {{action 'edit'}}>Edit DVD</button>

    {{/if}}

    <br/><br/>
    <br/><br/>

    {{#if file_url}}
      <div class="player">
        {{view App.Video controllerBinding="App.videoController"}}
      </div>

    {{else}}
      {{partial "dvd/episodes"}}

    {{/if}}

  </script>

  <script type="text/x-handlebars" id="dvd/episodes">
    <div class="row">
          <h4>Episodes</h4>
          <br/>

          <div class="col-four">
            {{#if isAddingEpisodes}}
              <br/>
              {{partial "episode/add"}}
            {{/if}}

            {{#if isAddingEpisodes}}
              <button class="success edit" {{action 'saveNewEpisode'}}>Save Episode</button>
              <button class="default" {{action 'cancelAddingEpisode'}}>Cancel</button>
            {{else}}
              <button class="success edit" {{action 'addEpisode'}}>Add Episode</button>
            {{/if}}
            <br/>
          </div>

          <br/><br/>

            {{#each episodes itemController="episode"}}

          <div class="col-four eps">
            <span class="episode-name"><strong>Name:</strong> &nbsp; {{name}}</span>

            <br/>
            <br/>

            <div class="episode_player">
              {{view App.Video controllerBinding="App.videoController"}}
            </div>

            <br/>
            <br/>
            {{#if isEditingEpisode}}
              {{partial 'episode/edit'}}
              <button class="success edit" {{action 'saveEpisode'}}>Save Episode</button>
              <button class="default" {{action 'cancelEditingEpisode'}}>Cancel</button>
              <button style="float: right;" class="danger" {{action 'deleteEpisode' id}}>Delete</button>
            {{else}}
              <button class="success edit" {{action 'editEpisode'}}>Edit Episode</button>
            {{/if}}

          </div>
            {{/each}}

      </div>
  </script>

  <script type="text/x-handlebars" id="dvd/_edit">
    <p>
      <label for="edit-title">Title</label>
      {{input type="text" id="edit-title" value=title}}
    </p>
    <p>
      <label for="edit-created_by">Created By:</label>
      {{input type="text" id="edit-created_by" value=created_by}}
    </p>
    <p>
      <label for="edit-rating">Rating:</label>
      {{input type="text" id="edit-rating" value=rating}}
    </p>
    <p>
      <label for="edit-abstract_txt">Info:</label>
      {{textarea id="edit-abstract_txt" value=abstract_txt}}
    </p>
    <p>
      <label for="edit-abstract_source">Info Source:</label>
      {{input type="text" id="edit-abstract_source" value=abstract_source}}
    </p>
    <p>
      <label for="edit-abstract_url">Info Source URL:</label>
      {{input type="text" id="edit-abstract_url" value=abstract_url}}
    </p>
    <p>
      <label for="edit-file_url">File URL:</label>
      {{#if episodes}}
        {{input type="text" id="edit-file_url" value=file_url disabled="true"}}
      {{else}}
        {{input type="text" id="edit-file_url" value=file_url}}
      {{/if}}
    </p>
    <p>
      <label for="edit-image_url">DVD Image:</label>
      {{#view Ember.View contentBinding="foto"}}
        {{view App.FotoUp class="dvd-image-upload"}}
        {{view App.FotoPreview width="200" srcBinding="foto"}}
      {{/view}}
    </p>
  </script>

  <script type="text/x-handlebars" id="dvd/_add">
    <p>
      <label for="add-title">Title</label>
      {{input type="text" id="add-title" value=model.title}}
    </p>
    <p>
      <label for="add-created_by">Created By:</label>
      {{input type="text" id="add-created_by" value=model.created_by}}
    </p>
    <p>
      <label for="add-rating">Rating:</label>
      {{input type="text" id="add-rating" value=model.rating}}
    </p>
  </script>

  <script type="text/x-handlebars" id="dvds/new">
    <div class="col-four dvd-form">
      <form {{action save on="submit"}}>
        {{partial "dvd_fields"}}
        <button type="submit">Add DVD</button>
      </form>
    </div>
  </script>

  <script type="text/x-handlebars" id="_dvds_list">
      <li class="dvd-block">
        {{#link-to 'dvd' id class="dvd-image"}}
        <img {{bind-attr src="image_url"}}/>
          <br/>
          {{title}} 
        {{/link-to}}
        <!--<a href='#/{{id}}' class="dvd-image">
          <img {{bind-attr src="image_url"}}/>
          <br/>
          {{title}}
        </a>-->
        <br/>
        {{view App.StarRating maxRating=5}}
        <br/>
      </li>
  </script>

  <script type="text/x-handlebars" id="_dvd_fields">
    {{view Ember.TextField valueBinding="title" id="title" placeholder="Title" required="true"}}<br />
    {{view Ember.TextField valueBinding="created_by" id="created_by" placeholder="Created By" required="true"}}<br />
    {{view Ember.TextField valueBinding="rating" id="rating" placeholder="Rating" required="true"}}<br />
  </script>

  <script type="text/x-handlebars" data-template-name="star-rating">    
    {{#each view.stars}}
    <span {{bind-attr data-rating=rating}}
      {{bind-attr class=":star-rating full:star:star-empty"}}
      {{action "setRating" target=view}}>
    </span>
    {{/each}}
  </script>

  <script type="text/x-handlebars" id="episode/add">
    <p>
      <label for="add-name">Name:</label>
      {{input type="text" id="add-name" valueBinding="name"}}
    </p>
    <p>
      <label for="add-episode_file_url">File URL:</label>
      {{input type="text" id="add-episode_file_url" valueBinding="episode_file_url"}}
    </p>
  </script>

  <script type="text/x-handlebars" id="episode/_edit">
    <p>
      <label for="edit-name">Name:</label>
      {{input type="text" id="edit-name" value=name}}
    </p>
    <p>
      <label for="edit-episode_file_url">File URL:</label>
      {{input type="text" id="edit-episode_file_url" value=episode_file_url}}
    </p>
  </script>

  <script src="js/libs/jquery-1.10.2.js"></script>
  <script src="bower_components/moment/moment.js"></script>
  <script src="js/libs/handlebars-1.1.2.js"></script>
  <script src="js/libs/ember-1.7.0.js"></script>
  <script src="js/libs/ember-data-1.0.0-beta.11.js"></script>
  <script type="text/javascript" src="js/libs/jquery.fancybox.js"></script>
  <script src="js/app.js"></script>
  <script src="js/flash.js"></script>
</body>
</html>
